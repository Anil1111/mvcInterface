var city = [{"id":"40000","name":"热门城市","szm":"A","parentid":"0"},{"id":"10000","name":"直辖市","szm":"A","parentid":"0"},{"id":"39000","name":"特别行政区","szm":"A","parentid":"0"},{"id":"19000","name":"安徽","szm":"A","parentid":"0"},{"id":"20000","name":"福建","szm":"F","parentid":"0"},{"id":"34000","name":"甘肃","szm":"G","parentid":"0"},{"id":"26000","name":"广东","szm":"G","parentid":"0"},{"id":"27000","name":"广西","szm":"G","parentid":"0"},{"id":"30000","name":"贵州","szm":"G","parentid":"0"},{"id":"28000","name":"海南","szm":"H","parentid":"0"},{"id":"11000","name":"河北","szm":"H","parentid":"0"},{"id":"23000","name":"河南","szm":"H","parentid":"0"},{"id":"16000","name":"黑龙江","szm":"H","parentid":"0"},{"id":"24000","name":"湖北","szm":"H","parentid":"0"},{"id":"25000","name":"湖南","szm":"H","parentid":"0"},{"id":"15000","name":"吉林","szm":"J","parentid":"0"},{"id":"17000","name":"江苏","szm":"J","parentid":"0"},{"id":"21000","name":"江西","szm":"J","parentid":"0"},{"id":"14000","name":"辽宁","szm":"L","parentid":"0"},{"id":"13000","name":"内蒙古","szm":"N","parentid":"0"},{"id":"36000","name":"宁夏","szm":"N","parentid":"0"},{"id":"35000","name":"青海","szm":"Q","parentid":"0"},{"id":"22000","name":"山东","szm":"S","parentid":"0"},{"id":"12000","name":"山西","szm":"S","parentid":"0"},{"id":"33000","name":"陕西","szm":"S","parentid":"0"},{"id":"29000","name":"四川","szm":"S","parentid":"0"},{"id":"44000","name":"台湾","szm":"T","parentid":"0"},{"id":"32000","name":"西藏","szm":"X","parentid":"0"},{"id":"37000","name":"新疆","szm":"X","parentid":"0"},{"id":"31000","name":"云南","szm":"Y","parentid":"0"},{"id":"18000","name":"浙江","szm":"Z","parentid":"0"},{"id":"48000","name":"海外","szm":"Z","parentid":"0"},{"id":"10001","name":"北京","szm":"B","parentid":"10000"},{"id":"10002","name":"上海","szm":"S","parentid":"10000"},{"id":"10003","name":"天津","szm":"T","parentid":"10000"},{"id":"10004","name":"重庆","szm":"Z","parentid":"10000"},{"id":"19001","name":"安庆","szm":"A","parentid":"19000"},{"id":"19002","name":"蚌埠","szm":"B","parentid":"19000"},{"id":"19003","name":"亳州","szm":"B","parentid":"19000"},{"id":"19004","name":"巢湖","szm":"C","parentid":"19000"},{"id":"19005","name":"池州","szm":"C","parentid":"19000"},{"id":"19006","name":"滁州","szm":"C","parentid":"19000"},{"id":"19007","name":"阜阳","szm":"F","parentid":"19000"},{"id":"19008","name":"合肥","szm":"H","parentid":"19000"},{"id":"19009","name":"淮北","szm":"H","parentid":"19000"},{"id":"19010","name":"淮南","szm":"H","parentid":"19000"},{"id":"19011","name":"黄山","szm":"H","parentid":"19000"},{"id":"19012","name":"六安","szm":"L","parentid":"19000"},{"id":"19013","name":"马鞍山","szm":"M","parentid":"19000"},{"id":"19014","name":"宿州","szm":"S","parentid":"19000"},{"id":"19015","name":"铜陵","szm":"T","parentid":"19000"},{"id":"19016","name":"芜湖","szm":"W","parentid":"19000"},{"id":"19017","name":"宣城","szm":"X","parentid":"19000"},{"id":"19018","name":"桐城","szm":"T","parentid":"19000"},{"id":"19019","name":"天长","szm":"T","parentid":"19000"},{"id":"19020","name":"明光","szm":"M","parentid":"19000"},{"id":"19021","name":"界首","szm":"J","parentid":"19000"},{"id":"19022","name":"宁国","szm":"N","parentid":"19000"},{"id":"20001","name":"福州","szm":"F","parentid":"20000"},{"id":"20002","name":"龙岩","szm":"L","parentid":"20000"},{"id":"20003","name":"南平","szm":"N","parentid":"20000"},{"id":"20004","name":"宁德","szm":"N","parentid":"20000"},{"id":"20005","name":"莆田","szm":"P","parentid":"20000"},{"id":"20006","name":"泉州","szm":"Q","parentid":"20000"},{"id":"20007","name":"三明","szm":"S","parentid":"20000"},{"id":"20008","name":"厦门","szm":"X","parentid":"20000"},{"id":"20009","name":"漳州","szm":"Z","parentid":"20000"},{"id":"20010","name":"平潭","szm":"P","parentid":"20000"},{"id":"34001","name":"白银","szm":"B","parentid":"34000"},{"id":"34002","name":"定西","szm":"D","parentid":"34000"},{"id":"34003","name":"甘南","szm":"G","parentid":"34000"},{"id":"34004","name":"嘉峪关","szm":"J","parentid":"34000"},{"id":"34005","name":"金昌","szm":"J","parentid":"34000"},{"id":"34006","name":"酒泉","szm":"J","parentid":"34000"},{"id":"34007","name":"兰州","szm":"L","parentid":"34000"},{"id":"34008","name":"临夏","szm":"L","parentid":"34000"},{"id":"34009","name":"陇南","szm":"L","parentid":"34000"},{"id":"34010","name":"平凉","szm":"P","parentid":"34000"},{"id":"34011","name":"庆阳","szm":"Q","parentid":"34000"},{"id":"34012","name":"天水","szm":"T","parentid":"34000"},{"id":"34013","name":"武威","szm":"W","parentid":"34000"},{"id":"34014","name":"张掖","szm":"Z","parentid":"34000"},{"id":"34015","name":"玉门","szm":"Y","parentid":"34000"},{"id":"34016","name":"敦煌","szm":"D","parentid":"34000"},{"id":"26001","name":"潮州","szm":"C","parentid":"26000"},{"id":"26002","name":"东莞","szm":"D","parentid":"26000"},{"id":"26003","name":"佛山","szm":"B","parentid":"26000"},{"id":"26004","name":"广州","szm":"G","parentid":"26000"},{"id":"26005","name":"河源","szm":"H","parentid":"26000"},{"id":"26006","name":"惠州","szm":"H","parentid":"26000"},{"id":"26007","name":"江门","szm":"J","parentid":"26000"},{"id":"26008","name":"揭阳","szm":"J","parentid":"26000"},{"id":"26009","name":"茂名","szm":"M","parentid":"26000"},{"id":"26010","name":"梅州","szm":"M","parentid":"26000"},{"id":"26011","name":"清远","szm":"Q","parentid":"26000"},{"id":"26012","name":"汕头","szm":"S","parentid":"26000"},{"id":"26013","name":"汕尾","szm":"S","parentid":"26000"},{"id":"26014","name":"韶关","szm":"S","parentid":"26000"},{"id":"26015","name":"深圳","szm":"S","parentid":"26000"},{"id":"26016","name":"阳江","szm":"Y","parentid":"26000"},{"id":"26017","name":"云浮","szm":"Y","parentid":"26000"},{"id":"26018","name":"湛江","szm":"Z","parentid":"26000"},{"id":"26019","name":"肇庆","szm":"Z","parentid":"26000"},{"id":"26020","name":"中山","szm":"Z","parentid":"26000"},{"id":"26021","name":"珠海","szm":"Z","parentid":"26000"},{"id":"27001","name":"百色","szm":"B","parentid":"27000"},{"id":"27002","name":"北海","szm":"B","parentid":"27000"},{"id":"27003","name":"崇左","szm":"C","parentid":"27000"},{"id":"27004","name":"防城港","szm":"F","parentid":"27000"},{"id":"27005","name":"贵港","szm":"G","parentid":"27000"},{"id":"27006","name":"桂林","szm":"G","parentid":"27000"},{"id":"27007","name":"河池","szm":"H","parentid":"27000"},{"id":"27008","name":"贺州","szm":"H","parentid":"27000"},{"id":"27009","name":"来宾","szm":"L","parentid":"27000"},{"id":"27010","name":"柳州","szm":"L","parentid":"27000"},{"id":"27011","name":"南宁","szm":"N","parentid":"27000"},{"id":"27012","name":"钦州","szm":"Q","parentid":"27000"},{"id":"27013","name":"梧州","szm":"W","parentid":"27000"},{"id":"27014","name":"玉林","szm":"Y","parentid":"27000"},{"id":"30001","name":"安顺","szm":"A","parentid":"30000"},{"id":"30002","name":"毕节","szm":"B","parentid":"30000"},{"id":"30003","name":"贵阳","szm":"G","parentid":"30000"},{"id":"30004","name":"六盘水","szm":"L","parentid":"30000"},{"id":"30005","name":"黔东南","szm":"Q","parentid":"30000"},{"id":"30006","name":"黔南","szm":"Q","parentid":"30000"},{"id":"30007","name":"黔西南","szm":"Q","parentid":"30000"},{"id":"30008","name":"铜仁","szm":"T","parentid":"30000"},{"id":"30009","name":"遵义","szm":"Z","parentid":"30000"},{"id":"28001","name":"海口","szm":"H","parentid":"28000"},{"id":"28002","name":"三亚","szm":"S","parentid":"28000"},{"id":"28003","name":"三沙","szm":"S","parentid":"28000"},{"id":"28004","name":"儋州","szm":"D","parentid":"28000"},{"id":"28005","name":"五指山","szm":"W","parentid":"28000"},{"id":"28006","name":"文昌","szm":"W","parentid":"28000"},{"id":"28007","name":"琼海","szm":"Q","parentid":"28000"},{"id":"28008","name":"万宁","szm":"W","parentid":"28000"},{"id":"28009","name":"东方","szm":"D","parentid":"28000"},{"id":"11001","name":"保定","szm":"B","parentid":"11000"},{"id":"11002","name":"沧州","szm":"C","parentid":"11000"},{"id":"11003","name":"承德","szm":"C","parentid":"11000"},{"id":"11004","name":"邯郸","szm":"H","parentid":"11000"},{"id":"11005","name":"衡水","szm":"H","parentid":"11000"},{"id":"11006","name":"廊坊","szm":"L","parentid":"11000"},{"id":"11007","name":"秦皇岛","szm":"Q","parentid":"11000"},{"id":"11008","name":"石家庄","szm":"S","parentid":"11000"},{"id":"11009","name":"唐山","szm":"T","parentid":"11000"},{"id":"11010","name":"邢台","szm":"X","parentid":"11000"},{"id":"11011","name":"张家口","szm":"Z","parentid":"11000"},{"id":"23001","name":"安阳","szm":"A","parentid":"23000"},{"id":"23002","name":"鹤壁","szm":"H","parentid":"23000"},{"id":"23003","name":"济源","szm":"J","parentid":"23000"},{"id":"23004","name":"焦作","szm":"J","parentid":"23000"},{"id":"23005","name":"开封","szm":"K","parentid":"23000"},{"id":"23006","name":"洛阳","szm":"L","parentid":"23000"},{"id":"23007","name":"漯河","szm":"T","parentid":"23000"},{"id":"23008","name":"南阳","szm":"N","parentid":"23000"},{"id":"23009","name":"平顶山","szm":"P","parentid":"23000"},{"id":"23010","name":"濮阳","szm":"P","parentid":"23000"},{"id":"23011","name":"三门峡","szm":"S","parentid":"23000"},{"id":"23012","name":"商丘","szm":"S","parentid":"23000"},{"id":"23013","name":"新乡","szm":"X","parentid":"23000"},{"id":"23014","name":"信阳","szm":"X","parentid":"23000"},{"id":"23015","name":"许昌","szm":"X","parentid":"23000"},{"id":"23016","name":"郑州","szm":"Z","parentid":"23000"},{"id":"23017","name":"周口","szm":"Z","parentid":"23000"},{"id":"23018","name":"驻马店","szm":"Z","parentid":"23000"},{"id":"16001","name":"大庆","szm":"D","parentid":"16000"},{"id":"16002","name":"大兴安岭","szm":"D","parentid":"16000"},{"id":"16003","name":"哈尔滨","szm":"H","parentid":"16000"},{"id":"16004","name":"鹤岗","szm":"H","parentid":"16000"},{"id":"16005","name":"黑河","szm":"H","parentid":"16000"},{"id":"16006","name":"鸡西","szm":"J","parentid":"16000"},{"id":"16007","name":"佳木斯","szm":"J","parentid":"16000"},{"id":"16008","name":"牡丹江","szm":"M","parentid":"16000"},{"id":"16009","name":"七台河","szm":"Q","parentid":"16000"},{"id":"16010","name":"齐齐哈尔","szm":"Q","parentid":"16000"},{"id":"16011","name":"双鸭山","szm":"S","parentid":"16000"},{"id":"16012","name":"绥化","szm":"S","parentid":"16000"},{"id":"16013","name":"伊春","szm":"Y","parentid":"16000"},{"id":"24001","name":"鄂州","szm":"E","parentid":"24000"},{"id":"24002","name":"恩施","szm":"E","parentid":"24000"},{"id":"24003","name":"黄冈","szm":"H","parentid":"24000"},{"id":"24004","name":"黄石","szm":"H","parentid":"24000"},{"id":"24005","name":"荆门","szm":"J","parentid":"24000"},{"id":"24006","name":"荆州","szm":"J","parentid":"24000"},{"id":"24007","name":"潜江","szm":"Q","parentid":"24000"},{"id":"24008","name":"神农架林区","szm":"S","parentid":"24000"},{"id":"24009","name":"十堰","szm":"S","parentid":"24000"},{"id":"24010","name":"随州","szm":"S","parentid":"24000"},{"id":"24011","name":"天门","szm":"T","parentid":"24000"},{"id":"24012","name":"武汉","szm":"W","parentid":"24000"},{"id":"24013","name":"仙桃","szm":"X","parentid":"24000"},{"id":"24014","name":"咸宁","szm":"X","parentid":"24000"},{"id":"24015","name":"襄阳","szm":"X","parentid":"24000"},{"id":"24016","name":"孝感","szm":"X","parentid":"24000"},{"id":"24017","name":"宜昌","szm":"Y","parentid":"24000"},{"id":"25001","name":"长沙","szm":"Z","parentid":"25000"},{"id":"25002","name":"株洲","szm":"Z","parentid":"25000"},{"id":"25003","name":"湘潭","szm":"X","parentid":"25000"},{"id":"25004","name":"衡阳","szm":"H","parentid":"25000"},{"id":"25005","name":"邵阳","szm":"S","parentid":"25000"},{"id":"25006","name":"岳阳","szm":"Y","parentid":"25000"},{"id":"25007","name":"常德","szm":"C","parentid":"25000"},{"id":"25008","name":"张家界","szm":"Z","parentid":"25000"},{"id":"25009","name":"益阳","szm":"Y","parentid":"25000"},{"id":"25010","name":"郴州","szm":"C","parentid":"25000"},{"id":"25011","name":"永州","szm":"Y","parentid":"25000"},{"id":"25012","name":"怀化","szm":"H","parentid":"25000"},{"id":"25013","name":"娄底","szm":"L","parentid":"25000"},{"id":"25014","name":"湘西","szm":"X","parentid":"25000"},{"id":"15001","name":"白城","szm":"B","parentid":"15000"},{"id":"15002","name":"白山","szm":"B","parentid":"15000"},{"id":"15003","name":"长春","szm":"Z","parentid":"15000"},{"id":"15004","name":"吉林","szm":"J","parentid":"15000"},{"id":"15005","name":"辽源","szm":"L","parentid":"15000"},{"id":"15006","name":"四平","szm":"S","parentid":"15000"},{"id":"15007","name":"松原","szm":"S","parentid":"15000"},{"id":"15008","name":"通化","szm":"T","parentid":"15000"},{"id":"15009","name":"延边","szm":"Y","parentid":"15000"},{"id":"15010","name":"长白山","szm":"Z","parentid":"15000"},{"id":"15011","name":"梅河口","szm":"M","parentid":"15000"},{"id":"15012","name":"公主岭","szm":"G","parentid":"15000"},{"id":"17001","name":"常州","szm":"C","parentid":"17000"},{"id":"17002","name":"淮安","szm":"H","parentid":"17000"},{"id":"17003","name":"连云港","szm":"L","parentid":"17000"},{"id":"17004","name":"南京","szm":"N","parentid":"17000"},{"id":"17005","name":"南通","szm":"N","parentid":"17000"},{"id":"17006","name":"苏州","szm":"S","parentid":"17000"},{"id":"17007","name":"宿迁","szm":"S","parentid":"17000"},{"id":"17008","name":"泰州","szm":"T","parentid":"17000"},{"id":"17009","name":"无锡","szm":"W","parentid":"17000"},{"id":"17010","name":"徐州","szm":"X","parentid":"17000"},{"id":"17011","name":"盐城","szm":"Y","parentid":"17000"},{"id":"17012","name":"扬州","szm":"Y","parentid":"17000"},{"id":"17013","name":"镇江","szm":"Z","parentid":"17000"},{"id":"21001","name":"抚州","szm":"F","parentid":"21000"},{"id":"21002","name":"赣州","szm":"G","parentid":"21000"},{"id":"21003","name":"吉安","szm":"J","parentid":"21000"},{"id":"21004","name":"景德镇","szm":"J","parentid":"21000"},{"id":"21005","name":"九江","szm":"J","parentid":"21000"},{"id":"21006","name":"南昌","szm":"N","parentid":"21000"},{"id":"21007","name":"萍乡","szm":"P","parentid":"21000"},{"id":"21008","name":"上饶","szm":"S","parentid":"21000"},{"id":"21009","name":"新余","szm":"X","parentid":"21000"},{"id":"21010","name":"宜春","szm":"Y","parentid":"21000"},{"id":"21011","name":"鹰潭","szm":"Y","parentid":"21000"},{"id":"14001","name":"鞍山","szm":"A","parentid":"14000"},{"id":"14002","name":"本溪","szm":"B","parentid":"14000"},{"id":"14003","name":"朝阳","szm":"Z","parentid":"14000"},{"id":"14004","name":"大连","szm":"D","parentid":"14000"},{"id":"14005","name":"丹东","szm":"D","parentid":"14000"},{"id":"14006","name":"抚顺","szm":"F","parentid":"14000"},{"id":"14007","name":"阜新","szm":"F","parentid":"14000"},{"id":"14008","name":"葫芦岛","szm":"H","parentid":"14000"},{"id":"14009","name":"锦州","szm":"J","parentid":"14000"},{"id":"14010","name":"辽阳","szm":"L","parentid":"14000"},{"id":"14011","name":"盘锦","szm":"P","parentid":"14000"},{"id":"14012","name":"沈阳","szm":"S","parentid":"14000"},{"id":"14013","name":"铁岭","szm":"T","parentid":"14000"},{"id":"14014","name":"营口","szm":"Y","parentid":"14000"},{"id":"13001","name":"阿拉善盟","szm":"A","parentid":"13000"},{"id":"13002","name":"巴彦淖尔","szm":"B","parentid":"13000"},{"id":"13003","name":"包头","szm":"B","parentid":"13000"},{"id":"13004","name":"赤峰","szm":"C","parentid":"13000"},{"id":"13005","name":"鄂尔多斯","szm":"E","parentid":"13000"},{"id":"13006","name":"呼和浩特","szm":"H","parentid":"13000"},{"id":"13007","name":"呼伦贝尔","szm":"H","parentid":"13000"},{"id":"13008","name":"通辽","szm":"T","parentid":"13000"},{"id":"13009","name":"乌海","szm":"W","parentid":"13000"},{"id":"13010","name":"乌兰察布","szm":"W","parentid":"13000"},{"id":"13011","name":"锡林郭勒盟","szm":"X","parentid":"13000"},{"id":"13012","name":"兴安盟","szm":"X","parentid":"13000"},{"id":"36001","name":"固原","szm":"G","parentid":"36000"},{"id":"36002","name":"石嘴山","szm":"S","parentid":"36000"},{"id":"36003","name":"吴忠","szm":"W","parentid":"36000"},{"id":"36004","name":"银川","szm":"Y","parentid":"36000"},{"id":"36005","name":"中卫","szm":"Z","parentid":"36000"},{"id":"35001","name":"果洛","szm":"G","parentid":"35000"},{"id":"35002","name":"海北","szm":"H","parentid":"35000"},{"id":"35003","name":"海东","szm":"H","parentid":"35000"},{"id":"35004","name":"海南","szm":"H","parentid":"35000"},{"id":"35005","name":"海西","szm":"H","parentid":"35000"},{"id":"35006","name":"黄南","szm":"H","parentid":"35000"},{"id":"35007","name":"西宁","szm":"X","parentid":"35000"},{"id":"35008","name":"玉树","szm":"Y","parentid":"35000"},{"id":"22001","name":"滨州","szm":"B","parentid":"22000"},{"id":"22002","name":"德州","szm":"D","parentid":"22000"},{"id":"22003","name":"东营","szm":"D","parentid":"22000"},{"id":"22004","name":"菏泽","szm":"H","parentid":"22000"},{"id":"22005","name":"济南","szm":"J","parentid":"22000"},{"id":"22006","name":"济宁","szm":"J","parentid":"22000"},{"id":"22007","name":"莱芜","szm":"L","parentid":"22000"},{"id":"22008","name":"聊城","szm":"L","parentid":"22000"},{"id":"22009","name":"临沂","szm":"L","parentid":"22000"},{"id":"22010","name":"青岛","szm":"Q","parentid":"22000"},{"id":"22011","name":"日照","szm":"R","parentid":"22000"},{"id":"22012","name":"泰安","szm":"T","parentid":"22000"},{"id":"22013","name":"威海","szm":"W","parentid":"22000"},{"id":"22014","name":"潍坊","szm":"W","parentid":"22000"},{"id":"22015","name":"烟台","szm":"Y","parentid":"22000"},{"id":"22016","name":"枣庄","szm":"Z","parentid":"22000"},{"id":"22017","name":"淄博","szm":"Z","parentid":"22000"},{"id":"12001","name":"长治","szm":"Z","parentid":"12000"},{"id":"12002","name":"大同","szm":"D","parentid":"12000"},{"id":"12003","name":"晋城","szm":"J","parentid":"12000"},{"id":"12004","name":"晋中","szm":"J","parentid":"12000"},{"id":"12005","name":"临汾","szm":"L","parentid":"12000"},{"id":"12006","name":"吕梁","szm":"L","parentid":"12000"},{"id":"12007","name":"朔州","szm":"S","parentid":"12000"},{"id":"12008","name":"太原","szm":"T","parentid":"12000"},{"id":"12009","name":"忻州","szm":"X","parentid":"12000"},{"id":"12010","name":"阳泉","szm":"Y","parentid":"12000"},{"id":"12011","name":"运城","szm":"Y","parentid":"12000"},{"id":"33001","name":"安康","szm":"A","parentid":"33000"},{"id":"33002","name":"宝鸡","szm":"B","parentid":"33000"},{"id":"33003","name":"汉中","szm":"H","parentid":"33000"},{"id":"33004","name":"商洛","szm":"S","parentid":"33000"},{"id":"33005","name":"铜川","szm":"T","parentid":"33000"},{"id":"33006","name":"渭南","szm":"W","parentid":"33000"},{"id":"33007","name":"西安","szm":"X","parentid":"33000"},{"id":"33008","name":"咸阳","szm":"X","parentid":"33000"},{"id":"33009","name":"延安","szm":"Y","parentid":"33000"},{"id":"33010","name":"榆林","szm":"Y","parentid":"33000"},{"id":"33011","name":"杨凌","szm":"Y","parentid":"33000"},{"id":"29001","name":"阿坝","szm":"A","parentid":"29000"},{"id":"29002","name":"巴中","szm":"B","parentid":"29000"},{"id":"29003","name":"成都","szm":"C","parentid":"29000"},{"id":"29004","name":"达州","szm":"D","parentid":"29000"},{"id":"29005","name":"德阳","szm":"D","parentid":"29000"},{"id":"29006","name":"甘孜","szm":"G","parentid":"29000"},{"id":"29007","name":"广安","szm":"G","parentid":"29000"},{"id":"29008","name":"广元","szm":"G","parentid":"29000"},{"id":"29009","name":"乐山","szm":"Y","parentid":"29000"},{"id":"29010","name":"泸州","szm":"L","parentid":"29000"},{"id":"29011","name":"眉山","szm":"M","parentid":"29000"},{"id":"29012","name":"绵阳","szm":"M","parentid":"29000"},{"id":"29013","name":"内江","szm":"N","parentid":"29000"},{"id":"29014","name":"南充","szm":"N","parentid":"29000"},{"id":"29015","name":"攀枝花","szm":"P","parentid":"29000"},{"id":"29016","name":"遂宁","szm":"S","parentid":"29000"},{"id":"29017","name":"雅安","szm":"Y","parentid":"29000"},{"id":"29018","name":"宜宾","szm":"Y","parentid":"29000"},{"id":"29019","name":"资阳","szm":"Z","parentid":"29000"},{"id":"29020","name":"自贡","szm":"Z","parentid":"29000"},{"id":"29021","name":"凉山","szm":"L","parentid":"29000"},{"id":"44001","name":"台北","szm":"T","parentid":"44000"},{"id":"44002","name":"新北","szm":"X","parentid":"44000"},{"id":"44003","name":"桃园","szm":"T","parentid":"44000"},{"id":"44004","name":"台中","szm":"T","parentid":"44000"},{"id":"44005","name":"台南","szm":"T","parentid":"44000"},{"id":"44006","name":"高雄","szm":"G","parentid":"44000"},{"id":"44007","name":"基隆","szm":"J","parentid":"44000"},{"id":"44008","name":"新竹","szm":"X","parentid":"44000"},{"id":"44009","name":"嘉义","szm":"J","parentid":"44000"},{"id":"32001","name":"阿里","szm":"A","parentid":"32000"},{"id":"32002","name":"昌都","szm":"C","parentid":"32000"},{"id":"32003","name":"拉萨","szm":"L","parentid":"32000"},{"id":"32004","name":"林芝","szm":"L","parentid":"32000"},{"id":"32005","name":"那曲","szm":"N","parentid":"32000"},{"id":"32006","name":"日喀则","szm":"R","parentid":"32000"},{"id":"32007","name":"山南","szm":"S","parentid":"32000"},{"id":"37001","name":"阿克苏","szm":"A","parentid":"37000"},{"id":"37002","name":"阿勒泰","szm":"A","parentid":"37000"},{"id":"37003","name":"巴音郭楞","szm":"B","parentid":"37000"},{"id":"37004","name":"博尔塔拉","szm":"B","parentid":"37000"},{"id":"37005","name":"昌吉州","szm":"C","parentid":"37000"},{"id":"37006","name":"哈密","szm":"H","parentid":"37000"},{"id":"37007","name":"和田","szm":"H","parentid":"37000"},{"id":"37008","name":"喀什","szm":"K","parentid":"37000"},{"id":"37009","name":"克拉玛依","szm":"K","parentid":"37000"},{"id":"37010","name":"克孜勒苏柯尔克孜","szm":"K","parentid":"37000"},{"id":"37011","name":"塔城","szm":"T","parentid":"37000"},{"id":"37012","name":"吐鲁番","szm":"T","parentid":"37000"},{"id":"37013","name":"乌鲁木齐","szm":"W","parentid":"37000"},{"id":"37014","name":"伊犁哈萨克","szm":"Y","parentid":"37000"},{"id":"37015","name":"石河子","szm":"S","parentid":"37000"},{"id":"37016","name":"阿拉尔","szm":"A","parentid":"37000"},{"id":"37017","name":"图木舒克","szm":"T","parentid":"37000"},{"id":"37018","name":"五家渠","szm":"W","parentid":"37000"},{"id":"37019","name":"北屯","szm":"B","parentid":"37000"},{"id":"37020","name":"铁门关","szm":"T","parentid":"37000"},{"id":"37021","name":"双河","szm":"S","parentid":"37000"},{"id":"37022","name":"可克达拉","szm":"K","parentid":"37000"},{"id":"37023","name":"昆玉","szm":"K","parentid":"37000"},{"id":"31001","name":"西双版纳","szm":"X","parentid":"31000"},{"id":"31002","name":"保山","szm":"B","parentid":"31000"},{"id":"31003","name":"楚雄","szm":"C","parentid":"31000"},{"id":"31004","name":"大理","szm":"D","parentid":"31000"},{"id":"31005","name":"德宏","szm":"D","parentid":"31000"},{"id":"31006","name":"迪庆","szm":"D","parentid":"31000"},{"id":"31007","name":"红河","szm":"H","parentid":"31000"},{"id":"31008","name":"昆明","szm":"K","parentid":"31000"},{"id":"31009","name":"丽江","szm":"L","parentid":"31000"},{"id":"31010","name":"临沧","szm":"L","parentid":"31000"},{"id":"31011","name":"怒江","szm":"N","parentid":"31000"},{"id":"31012","name":"普洱","szm":"P","parentid":"31000"},{"id":"31013","name":"曲靖","szm":"Q","parentid":"31000"},{"id":"31014","name":"文山","szm":"W","parentid":"31000"},{"id":"31015","name":"玉溪","szm":"Y","parentid":"31000"},{"id":"31016","name":"昭通","szm":"Z","parentid":"31000"},{"id":"18001","name":"杭州","szm":"H","parentid":"18000"},{"id":"18002","name":"湖州","szm":"H","parentid":"18000"},{"id":"18003","name":"嘉兴","szm":"J","parentid":"18000"},{"id":"18004","name":"金华","szm":"J","parentid":"18000"},{"id":"18005","name":"丽水","szm":"L","parentid":"18000"},{"id":"18006","name":"宁波","szm":"N","parentid":"18000"},{"id":"18007","name":"衢州","szm":"Q","parentid":"18000"},{"id":"18008","name":"绍兴","szm":"S","parentid":"18000"},{"id":"18009","name":"台州","szm":"T","parentid":"18000"},{"id":"18010","name":"温州","szm":"W","parentid":"18000"},{"id":"18011","name":"舟山","szm":"Z","parentid":"18000"},{"id":"39001","name":"香港","szm":"X","parentid":"39000"},{"id":"39002","name":"澳门","szm":"A","parentid":"39000"},{"id":"48001","name":"海外","szm":"H","parentid":"48000"},{"id":"40001","name":"杭州","szm":"H","parentid":"40000"},{"id":"40002","name":"深圳","szm":"S","parentid":"40000"},{"id":"40003","name":"南京","szm":"N","parentid":"40000"},{"id":"40004","name":"上海","szm":"S","parentid":"40000"},{"id":"40005","name":"武汉","szm":"W","parentid":"40000"},{"id":"40006","name":"广州","szm":"G","parentid":"40000"},{"id":"40007","name":"北京","szm":"B","parentid":"40000"},{"id":"40008","name":"成都","szm":"C","parentid":"40000"}];
$().ready(function(){
  var provinceID = "";
  var childTpl = '<li data-id="#id">#name</li>'
  var parentTpl = '';
  var target = {};

  // 初始化
  function citySelectorInit() {
    $("body").append(
      '<div class="jq-selector" id="city-selector">'+
      '  <input type="text" name="city-selector-key" placeholder="搜索城市">'+
      '  <p class="search-key">查找</p><p class="clear-key">清空搜索项</p>'+
      '  <div>'+
      '    <ul class="selector-parent city-selector-parent">'+
      '      <!--<li data-id=""></li>-->'+
      '    </ul>'+
      '    <ul class="selector-child city-selector-child">'+
      '      <!--<li data-id=""></li>-->'+
      '    </ul>'+
      '  </div>'+
      '</div>');
    var filterArr = $.grep(city,function(v){
      return v.parentid=='0'
    });
    filterArr = filterArr.sort(function(a,b){
      if (a.szm > b.szm) return 1
      if (a.szm < b.szm) return -1
      return 0
    });
    // console.log(filterArr);
    $("#city-selector .city-selector-parent")
      .html("");
    filterArr.forEach(function (e) {
      $("#city-selector .city-selector-parent").append(childTpl.replace("#id",e.id).replace("#name",e.name));
    })
    //$(".city-selector-parent").append();
  }
  citySelectorInit();

  // 选择器重置
  function selectorReset(x,y,w,h){
    $("#city-selector")
      .css("left",x+"px")
      .css("top",(y+h)+"px")
      .css("width",(w+11)+"px")
      .css("display","block")
      .find("[name='city-selector-key']").val("");
    var id = $("#city-selector .city-selector-parent")
      .scrollTop(0)
      .find("li")
      .removeClass("active")
      .first().addClass("active")
      .data("id");
    $("#city-selector .city-selector-child").html("");
    selectedProvince(id);

  }

  // 监听触发器的点击事件
  $("body").on('click','[data-selector="city"]',function(e){
    $(".jq-selector").not("#city-selector").hide();

    target = $(this);
    var target_off=target.hasClass('xyds')?target.parent():target;
    // console.log(target.offset(),target.position());
    selectorReset(target_off.offset().left,target_off.offset().top,target_off.width(),target_off.height());
    e.stopPropagation();
  });

  // 监听一级栏目选择事件
  $("#city-selector .city-selector-parent li").click(function(e){
    $("#city-selector .city-selector-parent li").removeClass("active");
    $(this).addClass("active");
    selectedProvince($(this).data("id"));
    $('#city-selector input[name="city-selector-key"]').val("");
    e.stopPropagation();
  })

  // 一级栏目选择后的DOM刷新方法
  function selectedProvince(id) {
    var filterArr = $.grep(city,function(v){
      return v.parentid==id
    });
    filterArr = filterArr.sort(function(a,b){
      if (a.szm > b.szm) return 1
      if (a.szm < b.szm) return -1
      return 0
    });
    $("#city-selector .city-selector-child")
      .html("")
      .scrollTop(0);
    filterArr.forEach(function (e) {
      $("#city-selector .city-selector-child").append(childTpl.replace("#id",e.id).replace("#name",e.name));
    })
  }

  // 根据keyword筛选二级栏目的方法和事件
  $("#city-selector .search-key").on('click',function(){
    var k = $('#city-selector input[name="city-selector-key"]').val();
    if(!k||k==''){
      return selectedProvince(id);
    }
    selectByKey(k);
  });
  function selectByKey(keyword) {
    var id = $('#city-selector .city-selector-parent li.active').data('id');
    var id_list = []

    // 特殊筛选:从所有类目中筛选
    var filterArr = $.grep(city,function(v){
      if(
        v.name.toUpperCase().replace(/\s/,'').indexOf(keyword.toUpperCase().replace(/\s/,''))>-1
        && v.parentid!='0' ){
        id_list.push(v.parentid);
        return true
      }
      return false
      //return v.parentid==id && v.name.indexOf(keyword)>-1
    });

    filterArr = filterArr.sort(function(a,b){
      if (a.szm > b.szm) return 1
      if (a.szm < b.szm) return -1
      return 0
    });
    $(".city-selector-child")
      .html("");
    filterArr.forEach(function (e) {
      $(".city-selector-child").append(childTpl.replace("#id",e.id).replace("#name",e.name));
    })

    $("#city-selector .city-selector-parent li").removeClass("active");
    id_list.forEach(function (e) {
      $("#city-selector .city-selector-parent li[data-id='"+e+"']").addClass("active");
    })

  }
  // & 清除筛选信息
  $("#city-selector .clear-key").on('click',function(){
    $('#city-selector input[name="city-selector-key"]').val("");
    var id = $('#city-selector .city-selector-parent li.active').data('id');
    if(!id||id==''){
      return
    }
    return selectedProvince(id);
  });// 选中结果之后的赋值和关闭
  $("body").on("click","#city-selector .city-selector-child li",function (e) {
    target.val($(this).html());
    $("body").click();
  })

  // 阻断组件内部点击事件的冒泡
  $("body").on("click",'#city-selector',function (e) {
    e.stopPropagation();
  })
  // 点击其他地方清空状态
  $("body").on("click",function (e) {
    $("#city-selector").hide();
  })
    $("body").on('keydown', '#city-selector input', function (event) {
        if (event.keyCode == 13) {
            $("#city-selector .search-key").click();
        }
    })
})


